<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BetShopTV⦿com - Rifas</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap');

    /* Estilo Geral */
    body {
      margin: 0;
      font-family: 'Roboto Condensed', sans-serif;
      background-image: url("https://corhexa.com/png/600x300/bebaba");
      background-repeat: repeat;
      color: #2b2424;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    a {
      color: #ff0000;
      text-decoration: none;
      text-decoration-color: #ff0000;
    }
    a:hover {
      text-decoration: underline;
    }

    /* Cabeçalho padrão (computador) */
    header {
      width: 100%;
      height: auto;
      min-height: 25vh;
      padding: 20px 0;
      background-color: #ff0000;
      position: relative;
      overflow: hidden;
    }

    .header-video {
      position: absolute;
      top: 50%;
      left: 50%;
      height: 100%;
      width: auto;
      min-width: 100%;
      object-fit: cover;
      transform: translate(-50%, -50%);
      background-color: #ff0000;
    }

    /* Conteúdo Principal */
    main {
      width: 90%;
      max-width: 1200px;
      margin: 20px auto; /* auto para horizontal centering */
      /* text-align: center; /* This was on index.html's main, but content within rifas.html sections will be left-aligned */
    }

    .calculator-box {
      border: 2px solid #ff0000;
      background-color: transparent;
      color: #ff0000;
      padding: 15px;
      margin-bottom: 20px; /* Space between boxes or other content */
      border-radius: 5px; /* Optional: for slightly rounded corners */
      text-align: center; /* Center the paragraph text within the box */
    }
    .calculator-box p {
      margin: 0; /* Remove default paragraph margin */
      font-size: 1.1em; /* Adjust as needed */
    }
    .calculator-box input[type="number"] {
      width: 70px; /* Default width, can be adjusted per input if needed */
      text-align: center;
      background-color: transparent;
      color: #ff0000; /* Text color of the input */
      border: 1px solid #ff0000; /* Border for the input */
      border-radius: 3px;
      padding: 5px;
      font-size: 1em;
      margin-left: 5px;
      margin-right: 5px;
    }
    /* Specific width for the first input if needed */
    #calc-costo-por-quantidade input[type="number"] {
      width: 60px;
    }

    /* Style for result spans to make them stand out if needed */
    .calculator-box span[id^="resultado-"] { /* Targets spans with id starting with "resultado-" */
      font-weight: bold;
      /* color: #ff0000; /* Already inherited from .calculator-box */
    }

    /* Remove browser default spinner arrows for number inputs (optional, for cleaner look) */
    .calculator-box input[type=number]::-webkit-inner-spin-button, 
    .calculator-box input[type=number]::-webkit-outer-spin-button { 
      -webkit-appearance: none; 
      margin: 0; 
    }
    .calculator-box input[type=number] {
      -moz-appearance: textfield; /* Firefox */
    }

    .calculate-button {
      border: 2px solid #ff0000;
      background-color: transparent;
      color: #ff0000;
      padding: 6px 12px; /* Slightly smaller padding for inline feel */
      margin-left: 10px; 
      cursor: pointer;
      font-weight: bold;
      font-size: 0.9em; /* Slightly smaller font size */
      border-radius: 3px; /* Consistent with input fields */
      vertical-align: middle; /* Align with text and inputs */
    }
    .calculate-button:hover {
      background-color: #ff0000;
      color: #ffffff; /* White text on hover */
    }

    /* Estilos específicos da página de rifas */
    .raffle-section, #selection-summary, #user-form-section {
      text-align: left; /* Override text-align:center from main if it was applied */
      margin-left: auto; /* Center these blocks if main is wider */
      margin-right: auto;
      max-width: 800px; /* Constrain width of these content blocks for better readability */
      margin-bottom: 30px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #fff; /* Fundo branco para destacar as seções */
    }
    .raffle-section h2 {
      color: #FF0000; /* Red color like in index.html */
      text-align: center; /* Centraliza o título da seção */
      font-size: 1.8em; /* Similar to h1 in index.html's mobile view */
      margin-bottom: 10px;
    }
    .number-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); /* Adjusted minmax for new content */
      gap: 8px; /* Adjusted gap */
      margin-top: 10px;
    }
    /* Base .raffle-number style */
    .raffle-number {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 5px;
      min-height: 55px; 
      cursor: pointer;
      border-radius: 3px;
      text-align: center;
      /* transition: all 0.2s ease-in-out; */ /* Optional: for hover effects */
    }

    /* Base styling for .number-code and .number-name */
    .number-code {
      font-weight: bold;
      font-size: 0.9em;
      display: block;
    }
    .number-name {
      font-size: 0.7em;
      display: block;
      margin-top: 2px;
      line-height: 1.1;
    }

    /* State: Available */
    .raffle-number.available {
      border: 1px solid #ff0000;
      background-color: transparent;
      color: #ff0000; 
    }
    .raffle-number.available .number-code,
    .raffle-number.available .number-name {
      color: #ff0000;
    }

    /* State: Available Hover */
    .raffle-number.available:hover {
      border-color: #2b2424;
    }
    .raffle-number.available:hover .number-code,
    .raffle-number.available:hover .number-name {
      color: #2b2424;
    }

    /* State: Unavailable */
    .raffle-number.unavailable {
      border: 1px solid transparent; 
      background-color: transparent;
      color: #696969;
      cursor: not-allowed;
      text-decoration: line-through;
    }
    .raffle-number.unavailable .number-code,
    .raffle-number.unavailable .number-name {
      color: #696969;
      text-decoration: line-through; /* Ensure children also get line-through */
    }
    /* Ensure line-through doesn't get removed by other styles if needed */
    .raffle-number.unavailable * {
       /* text-decoration: line-through !important; /* Using more specific selectors first */
    }
     .raffle-number.unavailable .number-code, .raffle-number.unavailable .number-name {
        text-decoration: inherit !important; /* More specific way to ensure line-through */
    }


    /* State: Selected */
    .raffle-number.selected {
      border: 1px solid #FF0000; 
      background-color: #ffcc00; 
      color: #000000; 
    }
    .raffle-number.selected .number-code,
    .raffle-number.selected .number-name {
      color: #000000; 
      text-decoration: none; 
    }
    /* Remove line-through for selected items */
    .raffle-number.selected *, .raffle-number.selected {
        text-decoration: none !important;
    }
    #selection-summary {
      margin-top: 20px;
      padding: 15px;
      background-color: #f9f9f9; /* Specific background for summary */
      border: 1px solid #eee;
      border-radius: 5px;
      /* text-align: left; already set by the common rule */
    }
    #user-form-section {
      background-color: #f9f9f9; /* Specific background for form section */
    }
    #selection-summary h3 {
      margin-top: 0;
      color: #2b2424;
      text-align: center; /* Centraliza o título do sumário */
    }
    #selected-numbers-list span {
        display: inline-block;
        padding: 3px 7px;
        margin: 2px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 3px;
    }

    /* Estilos para o formulário de usuário */
    #user-form-section {
      margin-top: 30px;
      padding: 20px;
      /* background-color: #f9f9f9; already set by the common rule */
      /* border: 1px solid #eee; already set by the common rule */
      /* border-radius: 5px; already set by the common rule */
      /* text-align: left; already set by the common rule */
    }
    #user-form-section h3 {
      margin-top: 0;
      color: #2b2424;
      text-align: center; /* Centraliza o título da seção do formulário */
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #333;
    }
    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group input[type="tel"],
    .form-group input[type="file"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box; /* So padding doesn't add to width */
    }
    .form-group input[type="file"] {
      padding: 3px; /* Specific padding for file input */
    }

    .submit-raffle-button {
      display: block; /* Make it a block to take full width or center easily */
      width: fit-content;
      margin: 20px auto 0 auto; /* Center the button */
      padding: 12px 25px;
      font-size: 1.2em;
      font-weight: bold;
      color: white;
      background-color: #FF0000; /* Red background */
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
    }
    .submit-raffle-button:hover {
      background-color: #cc0000; /* Darker red on hover */
    }
    #submission-instructions {
        margin-top: 15px;
        padding: 10px;
        background-color: #fff8e1; /* Light yellow background for instructions */
        border: 1px solid #ffecb3; /* Yellow border */
        border-radius: 4px;
        text-align: center;
    }

    /* Style for the 'Voltar à página inicial' link to look like a button */
    .back-to-home {
      display: inline-block;
      padding: 10px 15px;
      margin-top: 20px;
      margin-bottom: 20px; /* Espaço abaixo do botão */
      background-color: #2b2424;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
    }
    .back-to-home:hover {
      background-color: #4c4444;
    }

    /* Responsividade: Celulares (até 768px) */
    @media (max-width: 768px) {
      .raffle-section h2 {
        font-size: 1.5em;
      }
      .number-grid {
        grid-template-columns: repeat(auto-fill, minmax(65px, 1fr)); /* Adjust for mobile */
        gap: 5px;
      }
      .raffle-number {
        padding: 5px;
        min-height: 45px; /* Adjust for mobile */
      }
      .number-code {
        font-size: 0.8em;
      }
      .number-name {
        font-size: 0.65em;
      }
      .submit-raffle-button {
        padding: 10px 20px;
        font-size: 1.1em;
      }
      #selection-summary p, #user-form-section label, #user-form-section input {
        font-size: 0.95em;
      }
      /* Ensure header responsiveness from index.html is maintained or added if missing */
      header {
        height: 112px;
        min-height: 112px;
        max-height: 112px;
        padding: 4px 4px;
      }
      .header-video {
        height: 100%;
        width: auto;
        min-width: 300%;
        object-fit: cover;
        object-position: center;
        transform: translate(-50%, -50%);
      }
       .form-group input[type="text"],
      .form-group input[type="email"],
      .form-group input[type="tel"],
      .form-group input[type="file"] {
        padding: 8px; /* Consistent padding for form inputs on mobile */
      }
    }
  </style>
</head>
<body>
  <!-- Cabeçalho -->
  <header>
    <video class="header-video" autoplay loop muted playsinline>
     <source src="images/base-02-cabe%C3%A7alho%202.mp4" type="video/mp4">
      Seu navegador não suporta a tag de vídeo.
    </video>
  </header>

  <!-- Conteúdo Principal -->
  <main>

    <div class="container">
    <h1>Calculadora de Prêmios</h1>
    <label for="pecas">Peças disponíveis:</label><br>
    <input type="number" id="pecas" min="17" value="17"><br>
    <button onclick="calcularPremiados()">Calcular</button>
    <div class="result" id="resultado"></div>
  </div>

  <script>
    function calcularPremiados() {
      const pecasDisponiveis = parseInt(document.getElementById("pecas").value, 10);
      const resultado = document.getElementById("resultado");

      if (pecasDisponiveis < 17) {
        resultado.innerHTML = "Erro: Deve haver pelo menos 17 peças disponíveis.";
        return;
      }

      let premiados = [];
      let pecasRestantes = pecasDisponiveis;

      // Passo 1: Garantir 17 premiados com no mínimo 1 peça cada
      for (let i = 0; i < 17; i++) {
        premiados.push(1);
        pecasRestantes--;
      }

      // Passo 2: Distribuir peças restantes para os 17 primeiros (máximo de 3 peças por pessoa)
      for (let i = 0; i < premiados.length && pecasRestantes > 0; i++) {
        while (premiados[i] < 3 && pecasRestantes > 0) {
          premiados[i]++;
          pecasRestantes--;
        }
      }

      // Passo 3: Distribuir peças excedentes para novas pessoas
      let novaPessoa = 17; // Começar a partir da 18ª pessoa
      while (pecasRestantes > 0) {
        // Adicionar nova pessoa se necessário
        if (!premiados[novaPessoa]) {
          premiados[novaPessoa] = 0;
        }

        // Dar até 3 peças para a nova pessoa
        let distribuir = Math.min(3 - premiados[novaPessoa], pecasRestantes);
        premiados[novaPessoa] += distribuir;
        pecasRestantes -= distribuir;

        // Mover para a próxima pessoa
        if (premiados[novaPessoa] === 3) {
          novaPessoa++;
        }
      }

      resultado.innerHTML = `
        <p>Total de pessoas premiadas: ${premiados.filter(p => p > 0).length}</p>
        <p>Distribuição: ${premiados.join(", ")}</p>
      `;
    }
  </script>
    
    <div class="calculator-box" id="calc-costo-por-quantidade">
      <p>
        Apostar em 
        <input type="number" id="quantidade-numeros" min="0" value="0"> 
        números sai por R$ 
        <span id="resultado-custo" style="font-weight: bold;">0</span>!
        <button type="button" id="btn-calcular-custo" class="calculate-button">CALCULAR</button>
      </p>
    </div>
    <div class="calculator-box" id="calc-quantidade-por-dinheiro">
      <p>
        Tenho R$ 
        <input type="number" id="dinheiro-disponivel" min="0" value="0">, 
        dá pra apostar em 
        <span id="resultado-quantidade-numeros" style="font-weight: bold;">0</span> 
        números e <span id="resultado-dinheiro-sobra-falta" style="font-weight: bold;">...</span>
        <button type="button" id="btn-calcular-quantidade" class="calculate-button">CALCULAR</button>
      </p>
    </div>
    <section id="coluna-a" class="raffle-section">
      <h2>RIFA COLUNA A: <em>EVA TV Man</em></h2>
      <p>Selecione seus números abaixo:</p>
      <div class="number-grid">
        </div>
    </section>

    <section id="coluna-x" class="raffle-section">
      <h2>RIFA COLUNA X: <em>Chop Shop AV</em></h2>
      <p>Selecione seus números abaixo:</p>
      <div class="number-grid">
        </div>
    </section>

    <section id="selection-summary">
      <h3>Números Selecionados:</h3>
      <div id="selected-numbers-list">Nenhum número selecionado.</div>
      <p><strong>Total: R$ <span id="total-price">0</span></strong></p>
      <p><small><b>Preços:</b> 1 número = R$30; 2 números = R$50. <br>Para mais de 2 números, usamos a melhor combinação (ex: 3 números = R$80 (R$50+R$30), 4 números = R$100 (R$50+R$50)).</small></p>
    </section>

    <section id="user-form-section">
      <h3>Seus Dados para a Rifa</h3>
      <form id="raffle-user-form">
        <div class="form-group">
          <label for="fullName">Nome Completo:</label>
          <input type="text" id="fullName" name="fullName" required>
        </div>
        <div class="form-group">
          <label for="phone">Telefone (com DDD):</label>
          <input type="tel" id="phone" name="phone" required placeholder="(XX) XXXXX-XXXX">
        </div>
        <div class="form-group">
          <label for="email">E-mail:</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="paymentProof">Comprovante de Pagamento (imagem ou PDF):</label>
          <input type="file" id="paymentProof" name="paymentProof" accept="image/*,.pdf" required>
        </div>
        <button type="submit" class="submit-raffle-button">Participar da Rifa</button>
      </form>
      <div id="submission-instructions" style="display: none;">
        <p><strong>Quase lá!</strong></p>
        <p>Seu e-mail está sendo preparado. Por favor, anexe o comprovante de pagamento antes de enviar.</p>
        <p>Você receberá a confirmação das suas apostas em até 36h após o envio do e-mail com o comprovante.</p>
      </div>
    </section>

    <a href="index.html" class="back-to-home">Voltar à página inicial</a>
  </main>

<br><br>
<br><br>
<br><br>
<br><br>
<br><br>
<br><br>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const itemNames = [
    "40 graus", "5ª avenida", "Acionando o contatinho", "Ai, amiga", "Algodão doce", "Amanhecer", "Amarelo Frevo", "Ameixa", "Ar Fresco", "Areia", 
    "Atmosfera", "Azul Eclesiástico", "Azul biônico", "Batida de Amendoim", "Batida de coco", "Beijo roubado", "Bem-Estar", "Black", "Bolsa de Praia", "Boneca", 
    "Brinde da virada", "Brocado Rico", "Café", "Caminho do Jardim", "Camurça", "Capuccino Doce", "Casa Portuguesa", "Casamento do Verão", "Chafariz da Praça", "Cinza Tecnológico", 
    "Cinza minimalista", "Clássico", "Colinas de Inverno", "Concha Prateada", "Coral não tem igual", "Corpo bronzeado", "Corpo tropical", "Cristal rosa", "Céu da Antártida", "De repente, paixão", 
    "Deixa beijar", "Del Sol", "Delicadeza", "Dia Dourado", "Dieta hoje não", "Doce ou Travessura", "Doçura da Primavera", "Drama Noturno", "Dunas de areia", "Encontro Feliz", 
    "Encontro às escuras", "Estrela Cadente", "Estrela de luz", "Explícita", "Fazendo a fitness", "Fazendo vários nadas", "Figo Verde", "Fonte Secreta", "Framboesa", "Framboesa Radical", 
    "França", "Gabriele", "Garota verão", "Geada", "Geléia de Cupuaçu", "Glória da Colheita", "Grace", "Grafite fashionista", "Grande Metrópole", "Harmonia Lilás", 
    "Hoje sou minha", "Horizonte", "Intuição Divina", "Jabuticaba", "Jardim Misterioso", "Jeans", "Leite de coco", "Ligada no 220v", "Lilás Esplendoroso", "Lugar de Afeto", 
    "Luz da Floresta", "Luz na Janela", "Mais que preto, black", "Malva misterioso", "Mantilha", "Marrom da Riqueza", "Marrom mutante", "Mauve urban", "Meia de Seda", "Melancia", 
    "Mil e uma noites", "Momento de Promessa", "Momento selfie", "Mostarda Quente", "Mostarda em Grão", "Movie Star", "Moça Bonita", "Na dúvida, vinho!", "Nariz de palhaço", "Neutro Nepal", 
    "Noite de gala", "Noite quente", "Nua & crua", "Nude", "Nude desejo", "Nuvens Roxas", "Não mexe comigo", "Ocre Italiano", "Papel de Bala", "Pimenta rosa", 
    "Pinhão", "Pitada de Alecrim", "Pote de Argila", "Precioso Momento", "Preferia estar dormindo", "Prenda natural", "Puro glamour", "Pétala", "Pétala branca", "Pêra Madura", 
    "Pó de Pêssego", "Quadrado azul", "Reflexo de Cristal", "Renascer", "Repouso Tranquilo", "Rosa Cintilante", "Rosa Vintage", "Rosa antigo", "Rosa da vez", "Rosa floral", 
    "Rota do Deserto", "Rota do Vinho", "Roupa de Bebê", "Roxo místico", "Salmão Pálido", "Samba juliana", "Sem retoque", "Sensação de Rosas", "Sereno da Noite", 
    "Seta vermelha", "Sherazade", "Sol do oriente", "Solário", "Sonho de Anjo", "Suculenta", "Sálvia", "Só dá nude", "Tapete vermelho", "Teatro de Bonecos", "Teia de Aranha", 
    "Toque Casual", "Toque de Centeio", "Toque de Noz-Moscada", "Trevo Pálido", "Trilha Verde", "Tô bege!", "Urban chic", "Urso de Pelúcia", "Valência", "Vaso de Hortênsia", 
    "Ventos Calmos", "Verde Pasto", "Vermelha obsessão", "Vermelho ivete", "Vermelho proibido", "Vestida pra matar", "Via Láctea", "Violeta Preciosa", "Violeta Profundo", "Vou de rosa"
  ];

  const soldItemsA = ["A029", "A060"]; // "Chafariz da Praça", "Framboesa Radical"
  const soldItemsX = ["X029", "X060"];

  // Refined function definition
  function populateGrid(gridElement, columnPrefix, namesArray, soldList) {
    if (!gridElement) return; // Guard clause if grid element doesn't exist
    gridElement.innerHTML = ''; // Clear existing items

    for (let i = 1; i <= 170; i++) {
      const numberStr = String(i).padStart(3, '0');
      const itemCode = columnPrefix + numberStr;
      const itemName = namesArray[i-1] || "Item " + itemCode; // Use namesArray parameter
      const isSold = soldList.includes(itemCode);

      const raffleNumberDiv = document.createElement('div');
      raffleNumberDiv.classList.add('raffle-number');
      raffleNumberDiv.classList.add(isSold ? 'unavailable' : 'available');
      raffleNumberDiv.dataset.number = itemCode; // Use itemCode as data-number for uniqueness
      raffleNumberDiv.dataset.name = itemName;

      const numberCodeSpan = document.createElement('span');
      numberCodeSpan.classList.add('number-code');
      numberCodeSpan.textContent = itemCode;

      const numberNameSpan = document.createElement('span');
      numberNameSpan.classList.add('number-name');
      numberNameSpan.textContent = itemName;

      raffleNumberDiv.appendChild(numberCodeSpan);
      raffleNumberDiv.appendChild(numberNameSpan);
      grid.appendChild(raffleNumberDiv);
    }
  }

  // Adjusted calls to populateGrid
  const gridA = document.querySelector('#coluna-a .number-grid');
  const gridX = document.querySelector('#coluna-x .number-grid');

  if (gridA) {
    populateGrid(gridA, 'A', itemNames, soldItemsA); // Pass itemNames (global)
  }
  if (gridX) {
    populateGrid(gridX, 'X', itemNames, soldItemsX); // Pass itemNames (global)
  }

  const numberGrids = document.querySelectorAll('.number-grid');
  const selectedNumbersList = document.getElementById('selected-numbers-list');
  const totalPriceDisplay = document.getElementById('total-price');
  let selectedNumbers = [];

  numberGrids.forEach(grid => {
    grid.addEventListener('click', (event) => {
      const target = event.target.closest('.raffle-number'); // Ensure click on child elements selects the parent
      if (target && target.classList.contains('available')) {
        const itemCode = target.dataset.number; // This is now AXXX or XXXX
        // const itemName = target.dataset.name; // If needed later

        const itemName = target.dataset.name; 

        if (target.classList.contains('selected')) {
          target.classList.remove('selected');
          selectedNumbers = selectedNumbers.filter(item => item.id !== itemCode);
        } else {
          target.classList.add('selected');
          selectedNumbers.push({ id: itemCode, name: itemName }); // Store id (code) and name
        }
        updateSelectionSummary();
      }
    });
  });

  function updateSelectionSummary() {
    if (selectedNumbers.length === 0) {
      selectedNumbersList.innerHTML = 'Nenhum número selecionado.'; // Use innerHTML to clear previous spans
    } else {
      // Display both code and name
      selectedNumbersList.innerHTML = selectedNumbers.map(item => `<span style="display: block; margin-bottom: 5px;">${item.id} ⩺ ${item.name}</span>`).join('');
    }
    calculatePrice();
  }

  function calculatePrice() {
    const count = selectedNumbers.length;
    let price = 0;
    if (count === 1) {
      price = 30;
    } else if (count === 2) {
      price = 50;
    } else if (count > 2) {
      let pairs = Math.floor(count / 2);
      let singles = count % 2;
      price = (pairs * 50) + (singles * 30);
    }
    totalPriceDisplay.textContent = price;
  }

  const raffleForm = document.getElementById('raffle-user-form');
  const submissionInstructions = document.getElementById('submission-instructions');

  raffleForm.addEventListener('submit', function(event) {
    event.preventDefault(); 

    const fullName = document.getElementById('fullName').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value;
    const paymentProofFile = document.getElementById('paymentProof').files[0]; 

    if (selectedNumbers.length === 0) {
      alert('Por favor, selecione pelo menos um número para a rifa.');
      return;
    }

    if (!fullName || !phone || !email) {
      alert('Por favor, preencha todos os seus dados (Nome, Telefone, E-mail).');
      return;
    }
    
    if (!paymentProofFile) {
      alert('Por favor, anexe o comprovante de pagamento.');
      return;
    }

    let emailBody = `Olá, gostaria de participar da rifa com os seguintes detalhes:\n\n`;
    emailBody += `Nome Completo: ${fullName}\n`;
    emailBody += `Telefone: ${phone}\n`;
    emailBody += `E-mail: ${email}\n\n`;
    emailBody += `Números Selecionados (Código ⩺ Nome):\n`;
    selectedNumbers.forEach(item => {
      emailBody += `- ${item.id} ⩺ ${item.name}\n`; 
    });
    emailBody += `\nTotal Calculado: R$${totalPriceDisplay.textContent}\n\n`;
    emailBody += `---Comprovante de Pagamento anexado a este e-mail---`;

    const mailtoLink = \`mailto:betshoptv@gmail.com?subject=${encodeURIComponent('Participação na Rifa BetShopTV')}&body=${encodeURIComponent(emailBody)}\`;

    submissionInstructions.style.display = 'block';
    window.location.href = mailtoLink;
  });

  // --- Logic for Caixa 1: Custo por Quantidade ---
  const quantidadeNumerosInput = document.getElementById('quantidade-numeros');
  const resultadoCustoSpan = document.getElementById('resultado-custo');
  const btnCalcularCusto = document.getElementById('btn-calcular-custo');

  if (btnCalcularCusto && quantidadeNumerosInput && resultadoCustoSpan) {
    btnCalcularCusto.addEventListener('click', function() {
      let quantidade = parseInt(quantidadeNumerosInput.value, 10);
      let custo = 0;

      if (isNaN(quantidade) || quantidade < 0) {
        quantidade = 0;
        quantidadeNumerosInput.value = 0; // Also reset input field if invalid
      }
      
      if (quantidade === 0) { // Explicitly handle 0 after potential reset
          custo = 0;
          // If the original input was not '0' but became 0 due to validation, ensure input reflects this
          if (quantidadeNumerosInput.value !== '0') {
            quantidadeNumerosInput.value = 0;
          }
      } else if (quantidade === 1) {
        custo = 30;
      } else if (quantidade === 2) {
        custo = 50;
      } else if (quantidade > 2) {
        const pares = Math.floor(quantidade / 2);
        const unitarios = quantidade % 2;
        custo = (pares * 50) + (unitarios * 30);
      }
      // No need for separate 'if (quantidade <=0)' check if handled by (quantidade === 0)

      resultadoCustoSpan.textContent = custo;
    });
  }

  // --- Logic for Caixa 2: Quantidade por Dinheiro ---
  const dinheiroDisponivelInput = document.getElementById('dinheiro-disponivel');
  const resultadoQuantidadeNumerosSpan = document.getElementById('resultado-quantidade-numeros');
  const resultadoDinheiroSobraFaltaSpan = document.getElementById('resultado-dinheiro-sobra-falta');
  const btnCalcularQuantidade = document.getElementById('btn-calcular-quantidade');

  if (btnCalcularQuantidade && dinheiroDisponivelInput && resultadoQuantidadeNumerosSpan && resultadoDinheiroSobraFaltaSpan) {
    btnCalcularQuantidade.addEventListener('click', function() {
      let dinheiroOriginal = parseInt(dinheiroDisponivelInput.value, 10);
      let dinheiro = dinheiroOriginal; // Work with a copy for calculations
      let numerosComprados = 0;
      let custoTotal = 0; 
      let sobraFaltaTexto = "";

      if (isNaN(dinheiro) || dinheiro < 0) {
        dinheiro = 0;
        dinheiroOriginal = 0;
        dinheiroDisponivelInput.value = 0; // Reset input field
      }
      
      if (dinheiroOriginal === 0) { 
          numerosComprados = 0;
          sobraFaltaTexto = "sobra R$0";
          // Ensure input field is also 0 if it was, e.g., empty or invalid leading to this path
          if (dinheiroDisponivelInput.value !== '0') {
            dinheiroDisponivelInput.value = 0;
          }
      } else {
        // Prioritize $50 packages (2 numbers)
        if (dinheiro >= 50) {
          const pacotesDe50 = Math.floor(dinheiro / 50);
          numerosComprados += pacotesDe50 * 2;
          custoTotal += pacotesDe50 * 50;
          dinheiro -= pacotesDe50 * 50; 
        }
        // Check if remaining money can buy one more $30 package (1 number)
        if (dinheiro >= 30) {
          numerosComprados += 1;
          custoTotal += 30;
          dinheiro -= 30; 
        }
        
        if (numerosComprados > 0) {
          sobraFaltaTexto = `sobra R$${dinheiro}`; 
        } else { 
          if (dinheiroOriginal < 30) { 
            sobraFaltaTexto = `falta R$${30 - dinheiroOriginal} para o 1º número`;
          } else { 
            sobraFaltaTexto = "valor insuficiente"; 
          }
        }
      }
      
      // This check might be redundant if the above logic correctly sets input to 0 for invalid/negative
      // but serves as a final explicit reset for the output if input field value is strictly "0"
      if (dinheiroDisponivelInput.value === '0') { 
           numerosComprados = 0;
           sobraFaltaTexto = "sobra R$0";
      }

      resultadoQuantidadeNumerosSpan.textContent = numerosComprados;
      resultadoDinheiroSobraFaltaSpan.textContent = sobraFaltaTexto;
    });
  }
});
</script>

</body>
</html>
